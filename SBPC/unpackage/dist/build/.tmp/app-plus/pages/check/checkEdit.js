(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/check/checkEdit"],{"08e6":function(t,e,i){"use strict";var n=i("2427"),o=i.n(n);o.a},"23b8":function(t,e,i){"use strict";i.r(e);var n=i("d54a"),o=i.n(n);for(var c in n)"default"!==c&&function(t){i.d(e,t,function(){return n[t]})}(c);e["default"]=o.a},2427:function(t,e,i){},"5d63":function(t,e,i){"use strict";i.r(e);var n=i("9f1b"),o=i.n(n);for(var c in n)"default"!==c&&function(t){i.d(e,t,function(){return n[t]})}(c);e["default"]=o.a},"9f1b":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(i("8959")),o=u(i("09d6")),c=u(i("d36e")),l=u(i("d869")),a=u(i("9fbc")),s=(u(i("40bc")),u(i("736d"))),r=(u(i("fa28")),u(i("bc96")),i("2f62"));function u(t){return t&&t.__esModule?t:{default:t}}var d={computed:(0,r.mapState)(["userInfo"]),components:{uniList:n.default,uniListItem:c.default,uniIcon:o.default,prompt:l.default},data:function(){return{model:{jclx:"",llrid:"",llrmc:"",jcrq:"",qtcyid:"",qtcy:"",mb:"",jcjlList:[]},pageState:0,currentModule:null,checkTypes:[],selectedPersons:[],selectedModule:[],editable:!0,promptVisible:!1,normal:{color:"#24BE41",size:"22",type:"checkbox-filled"},undetected:{color:"#FFDE52",size:"22",type:"info-filled"},abnormal:{color:"#C11E1E",size:"22",type:"clear"}}},onLoad:function(t){0==this.pageState&&(this.getCheckTypes(),this.getCheckModule())},onNavigationBarButtonTap:function(){},onUnload:function(){},methods:{getCheckTypes:function(e){var i=this,n={userid:i.userInfo.userid};s.default.requestLoading(a.default.getCheckTypes,n,"正在获取检查类型",function(t){i.checkTypes=t.data},function(){t.showToast({icon:"none",title:"获取失败"})},function(){})},getCheckModule:function(e){var i=this,n={userid:i.userInfo.userid};s.default.requestLoading(a.default.getCheckModule,n,"正在获取检查模板",function(t){i.selectedModule=t.data},function(){t.showToast({icon:"none",title:"获取失败"})},function(){})},saveClick:function(t){},completeClick:function(t){},pickerChange:function(t,e){this.model[e.target.id]=t[e.target.value]},dateChange:function(t,e,i){this.pageState==i&&(this.model[t]=e.target.value)},jumpPersonChoose:function(e){var i=this,n="CHECK_PERSONS";t.navigateTo({url:"../common/personChoose?key="+n+"&mltiple=true&selected="+JSON.stringify(this.selectedPersons)}),i.$fire.once(n,function(t){i.selectedPersons=t,i.formatPersons()})},mbChange:function(t,e){this.currentModule=t[e.target.value],this.model[e.target.id]=t[e.target.value].mbmc,this.getCheckInfoByMb()},getCheckInfoByMb:function(){var e=this,i={userid:e.userInfo.userid,mbid:e.currentModule.mbid};s.default.requestLoading(a.default.getCheckInfo,i,"正在获取检查项",function(t){e.model.jcjlList=t.data},function(){t.showToast({icon:"none",title:"获取失败"})},function(){})},jumpEdit:function(e,i){var n=this;if(0!=this.editable){var o="INFO_EDIT";t.navigateTo({url:"checkInfoEdit?item="+JSON.stringify(e)+"&index="+i+"&key="+o}),this.$fire.once(o,function(t){n.model.jcjlList.splice(t.index,1,t.item)})}},addCheck:function(t){this.promptVisible=!0},clickPromptConfirm:function(e){if(""!=e){var i={bzlx:"1",ifwt:"",jcbz:e,jcbzid:"",wtms:"",zgqk:"",zplist:[]};this.model.jcjlList.push(i),this.promptVisible=!1}else t.showToast({icon:"none",title:"请输入检查标题内容"})},clickCancel:function(t){this.promptVisible=!1},formatPersons:function(){for(var t="",e="",i=0;i<this.selectedPersons.length;i++){var n=this.selectedPersons[i];t=n.id+";"+t,e=n.name+";"+e}this.model.qtcy=e,this.model.qtcyid=t},getIcon:function(t){return"正常"==t.ifwt?this.normal:"异常"==t.ifwt?this.abnormal:this.undetected}}};e.default=d}).call(this,i("6e42")["default"])},abb9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"baseView"},[i("scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true"}},[i("view",{staticClass:"cellTitleView"},[i("text",{staticClass:"cellTitle"},[t._v("基础信息")])]),i("view",{staticClass:"cellInfoView"},[i("uni-list",{attrs:{mpcomid:"609973d6-5"}},[i("picker",{attrs:{id:"jclx",range:t.checkTypes,"range-key":"dictvalue",eventid:"609973d6-0"},on:{change:function(e){t.pickerChange(t.checkTypes,e)}}},[i("uni-list-item",{attrs:{title:"检查类型",subnote:t.model.jclx.dictvalue,"show-arrow":!0,mpcomid:"609973d6-0"}})],1),i("uni-list-item",{attrs:{title:"检查人",note:t.model.jcr,"show-arrow":"false",mpcomid:"609973d6-1"}}),i("picker",{attrs:{mode:"date",value:t.model.jcrq,eventid:"609973d6-1"},on:{change:function(e){t.dateChange("jcrq",e)}}},[i("uni-list-item",{attrs:{title:"检查日期",subnote:t.model.jcrq,"show-arrow":!0,mpcomid:"609973d6-2"}})],1),i("uni-list-item",{attrs:{title:"检查组成员",subnote:t.model.qtcy,"show-arrow":!0,eventid:"609973d6-2",mpcomid:"609973d6-3"},on:{click:t.jumpPersonChoose}}),i("picker",{attrs:{id:"mb",range:t.selectedModule,"range-key":"mbmc",eventid:"609973d6-3"},on:{change:function(e){t.mbChange(t.selectedModule,e)}}},[i("uni-list-item",{attrs:{title:"检查模板",subnote:t.model.mb,"show-arrow":!0,mpcomid:"609973d6-4"}})],1)],1)],1),t.model.jcjlList.length>0?i("block",[i("view",{staticClass:"cellTitleView"},[i("text",{staticClass:"cellTitle"},[t._v("检查内容")]),i("text",{staticClass:"cellTitle"},[t._v("正常-")]),i("uni-icon",{attrs:{type:"checkbox-filled",size:"22",color:"#24BE41",mpcomid:"609973d6-6"}}),i("text",{staticClass:"cellTitle"},[t._v("未检-")]),i("uni-icon",{attrs:{type:"info-filled",size:"22",color:"#FFDE52",mpcomid:"609973d6-7"}}),i("text",{staticClass:"cellTitle"},[t._v("异常-")]),i("uni-icon",{attrs:{type:"clear",size:"22",color:"#C11E1E",mpcomid:"609973d6-8"}})],1),i("view",{staticClass:"cellInfoView"},[i("uni-list",{attrs:{mpcomid:"609973d6-10"}},t._l(t.model.jcjlList,function(e,n){return i("uni-list-item",{key:n,attrs:{title:e.jcbz,note:e.wtms,"show-extra-icon":"true","show-arrow":t.editable,"extra-icon":t.getIcon(e),eventid:"609973d6-4-"+n,mpcomid:"609973d6-9-"+n},on:{click:function(i){t.jumpEdit(e,n)}}})}))],1),i("image",{staticClass:"addCheck",attrs:{mode:"aspectFit",src:"../../static/assets/addCheck.png",eventid:"609973d6-5"},on:{click:t.addCheck}})]):t._e()],1),i("view",{staticClass:"bottomView"},[i("view",{staticClass:"buttonStyle",attrs:{eventid:"609973d6-6"},on:{click:t.saveClick}},[t._v("保存")]),i("view",{staticClass:"buttonStyle",attrs:{eventid:"609973d6-7"},on:{click:t.completeClick}},[t._v("完成检查")])]),t.promptVisible?i("prompt",{attrs:{title:"添加检查内容",placeholder:"请输入检查标题",defaultValue:"",mainColor:"#3296FA",eventid:"609973d6-8",mpcomid:"609973d6-11"},on:{cancel:t.clickCancel,confirm:t.clickPromptConfirm}}):t._e()],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},ad76:function(t,e,i){"use strict";i("c6c1");var n=c(i("b0ce")),o=c(i("cd38"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},ae6f:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?t._e():i("view",{staticClass:"prompt-box",attrs:{eventid:"15605040-3"},on:{touchmove:!0}},[i("view",{staticClass:"prompt"},[i("view",{staticClass:"prompt-top"},[i("text",{staticClass:"prompt-title"},[t._v(t._s(t.title))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"prompt-input",attrs:{type:"text",placeholder:t.placeholder,eventid:"15605040-0"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})]),t._t("default",null,{mpcomid:"15605040-0"}),i("view",{staticClass:"prompt-buttons",style:"background:"+t.mainColor},[i("button",{staticClass:"prompt-cancle",style:"color:"+t.cancelColor,attrs:{eventid:"15605040-1"},on:{click:function(e){t.$emit("cancel",t.value)}}},[t._v("取消")]),i("button",{style:"color:"+t.mainColor,attrs:{eventid:"15605040-2"},on:{click:function(e){t.$emit("confirm",t.value)}}},[t._v("确定")])],1)],2)])},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},c5fc:function(t,e,i){},cd38:function(t,e,i){"use strict";i.r(e);var n=i("abb9"),o=i("5d63");for(var c in o)"default"!==c&&function(t){i.d(e,t,function(){return o[t]})}(c);i("d490");var l=i("2877"),a=Object(l["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},d490:function(t,e,i){"use strict";var n=i("c5fc"),o=i.n(n);o.a},d54a:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{visible:{type:Boolean,default:!1,required:!0},title:{type:String,default:"提示"},placeholder:{type:String,default:"请输入内容"},cancelColor:{type:String,default:"#818181"},mainColor:{type:String,default:"#3296FA"},defaultValue:{type:String}},data:function(){return{value:""}},mounted:function(){this.value=this.defaultValue},methods:{close:function(){this.$emit("update:visible",!1)}}};e.default=n},d869:function(t,e,i){"use strict";i.r(e);var n=i("ae6f"),o=i("23b8");for(var c in o)"default"!==c&&function(t){i.d(e,t,function(){return o[t]})}(c);i("08e6");var l=i("2877"),a=Object(l["a"])(o["default"],n["a"],n["b"],!1,null,"0850b3d4",null);e["default"]=a.exports}},[["ad76","common/runtime","common/vendor"]]]);