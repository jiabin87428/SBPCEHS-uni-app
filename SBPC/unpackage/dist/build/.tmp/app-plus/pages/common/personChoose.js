(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/personChoose"],{"0079":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s("9fbc")),n=a(s("736d")),c=s("2f62");function a(e){return e&&e.__esModule?e:{default:e}}var l={computed:(0,c.mapState)(["userInfo"]),data:function(){return{key:"",condition:"",mltiple:!1,selectedList:[],personList:[],orgId:"",orgName:"",backLevel:1}},onLoad:function(e){var t=this;this.key=e.key,this.mltiple="true"==e.mltiple,this.selectedList=null==e.selected?[]:JSON.parse(e.selected),this.orgId=null==e.orgId?"":e.orgId,this.backLevel=null==e.back?1:parseInt(e.back),this.condition=null==e.condition?"":e.condition,this.orgName=null==e.orgName?"":e.orgName,this.getPersonList();var s="SET_SELECTED_"+this.backLevel;this.$fire.on(s,function(e){t.selectedList=e})},onNavigationBarButtonTap:function(){},onShow:function(){},onBackPress:function(e){if("navigateBack"===e.from)console.log("22222");else if(this.backLevel>1){var t="SET_SELECTED_"+(this.backLevel-1);this.$fire.fire(t,this.selectedList)}},methods:{getPersonList:function(){var t=this,s={userid:t.userInfo.userid,orgid:t.orgId,data:t.condition};n.default.requestLoading(i.default.getPersonList,s,"正在加载",function(e){t.personList=e.data,t.comparSelectedList()},function(){e.showToast({icon:"none",title:"加载失败"})},function(){})},comparSelectedList:function(e){for(var t=0;t<this.personList.length;t++)for(var s=this.personList[t],i=0;i<this.selectedList.length;i++){var n=this.selectedList[i];n.id==s.id&&(s.selected=!0,this.personList.splice(t,1,s))}},chooseCurrent:function(t){0==this.mltiple&&"Y"==t.isUser&&(this.$fire.fire(this.key,t),e.navigateBack({delta:this.backLevel}))},confirmCurrentList:function(t){this.$fire.fire(this.key,this.selectedList),e.navigateBack({delta:this.backLevel})},addOrDeleteCurrent:function(e,t){if(1==e.selected)for(var s=0;s<this.selectedList.length;s++){var i=this.selectedList[s];if(i.id==e.id)return i.selected=!1,this.personList.splice(t,1,i),void this.selectedList.splice(s,1)}else e.selected=!0,e.orgName=this.orgName,this.personList.splice(t,1,e),this.selectedList.push(e)},gotoNext:function(t){var s=this.backLevel+1;e.navigateTo({url:"../common/personChoose?selected="+JSON.stringify(this.selectedList)+"&key="+this.key+"&condition="+this.condition+"&mltiple="+this.mltiple+"&orgId="+t.id+"&orgName="+t.name+"&back="+s})},editSelected:function(t){var s=this,i="VIEW_SELECTED_PERSON";e.navigateTo({url:"selectedPersonPage?selectedList="+JSON.stringify(this.selectedList)+"&key="+i}),this.$fire.once(i,function(e){s.selectedList=e})}}};t.default=l}).call(this,s("6e42")["default"])},1360:function(e,t,s){"use strict";s("c6c1");var i=c(s("b0ce")),n=c(s("a3c0"));function c(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(n.default))},3712:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"baseView"},[s("scroll-view",{staticClass:"personScrollView",attrs:{"scroll-y":"true"}},e._l(e.personList,function(t,i){return s("block",{key:i},[s("view",{staticClass:"cellBaseView_Row"},[1==e.mltiple&&1==t.selected&&"Y"==t.isUser?s("image",{staticClass:"selectedImg",attrs:{src:"../../static/assets/selected.png"}}):e._e(),1!=e.mltiple||"Y"!=t.isUser||0!=t.selected&&null!=t.selected?e._e():s("image",{staticClass:"unSelectedImg",attrs:{src:"../../static/assets/unselected.png"}}),0==e.mltiple?s("view",{staticClass:"orgName",attrs:{eventid:"16742adb-0-"+i},on:{click:function(s){e.chooseCurrent(t)}}},[e._v(e._s(t.name))]):e._e(),1==e.mltiple?s("view",{staticClass:"orgName",attrs:{eventid:"16742adb-1-"+i},on:{click:function(s){e.addOrDeleteCurrent(t,i)}}},[e._v(e._s(t.name))]):e._e(),"N"==t.isUser?s("view",{staticClass:"nextLevelView",attrs:{eventid:"16742adb-2-"+i},on:{click:function(s){e.gotoNext(t)}}},[s("view",{staticClass:"columnLine"}),s("image",{staticClass:"levelImg",attrs:{mode:"aspectFit",src:"../../static/assets/level.png"}}),s("view",{staticClass:"nextLevel"},[e._v("下级")])]):e._e()]),s("view",{staticClass:"cellLine"})])})),1==e.mltiple?s("view",{staticClass:"bottomView"},[s("text",{staticClass:"hasChoose",attrs:{eventid:"16742adb-3"},on:{click:e.editSelected}},[e._v("已选择:"+e._s(e.selectedList.length)+"人")]),s("view",{staticClass:"confirmButtom",attrs:{eventid:"16742adb-4"},on:{click:e.confirmCurrentList}},[e._v("确定")])]):e._e()],1)},n=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return n})},"39e9":function(e,t,s){"use strict";var i=s("42e4"),n=s.n(i);n.a},"42e4":function(e,t,s){},a3c0:function(e,t,s){"use strict";s.r(t);var i=s("3712"),n=s("b66c");for(var c in n)"default"!==c&&function(e){s.d(t,e,function(){return n[e]})}(c);s("39e9");var a=s("2877"),l=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=l.exports},b66c:function(e,t,s){"use strict";s.r(t);var i=s("0079"),n=s.n(i);for(var c in i)"default"!==c&&function(e){s.d(t,e,function(){return i[e]})}(c);t["default"]=n.a}},[["1360","common/runtime","common/vendor"]]]);