(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/peixun/peixun"],{"0f57":function(t,e,s){},"15d3":function(t,e,s){"use strict";s.r(e);var n=s("dd65"),i=s.n(n);for(var c in n)"default"!==c&&function(t){s.d(e,t,function(){return n[t]})}(c);e["default"]=i.a},"3a14":function(t,e,s){"use strict";s("c6c1");var n=c(s("b0ce")),i=c(s("3e11"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(i.default))},"3e11":function(t,e,s){"use strict";s.r(e);var n=s("df90"),i=s("15d3");for(var c in i)"default"!==c&&function(t){s.d(e,t,function(){return i[t]})}(c);s("a673");var a=s("2877"),o=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},a673:function(t,e,s){"use strict";var n=s("0f57"),i=s.n(n);i.a},dd65:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=d(s("8959")),i=d(s("09d6")),c=d(s("d36e")),a=d(s("d869")),o=d(s("9fbc")),r=(d(s("40bc")),d(s("736d"))),l=(d(s("fa28")),d(s("bc96"))),u=s("2f62");function d(t){return t&&t.__esModule?t:{default:t}}var h={computed:(0,u.mapState)(["userInfo"]),components:{uniList:n.default,uniListItem:c.default,uniIcon:i.default,prompt:a.default},data:function(){return{model:{bt:"",recordid:""},currentIndex:0,maxReadIndex:0,classList:[],timer:null,nextPage:"下一页",seconds:0,isCountFinish:!1,backPressFlag:!0}},onLoad:function(t){var e=this;this.$fire.on("APP_HIDE",function(t){e.pauseTimer()}),this.$fire.on("APP_SHOW",function(t){e.pauseTimer(),e.startCount()}),this.model.recordid=null==t.recordid?"":t.recordid,this.getDetail()},onBackPress:function(){var e=this;if(1==e.backPressFlag)return console.log(e.backPressFlag),t.showModal({title:"提示",content:"是否确认退出培训？",confirmText:"确认",cancelText:"取消",success:function(s){s.confirm?(e.backPressFlag=!1,t.navigateBack({delta:1})):s.cancel&&(e.backPressFlag=!0)}}),e.backPressFlag},onUnload:function(){this.timer&&this.clearTimer()},methods:{getDetail:function(){var e=this;e.currentIndex=0,e.maxReadIndex=0;var s={userid:e.userInfo.userid,recordid:e.model.recordid};r.default.requestLoading(o.default.getClassDetail,s,"正在加载课件",function(t){e.model=t,e.classifyPhotos(t.kjList),e.seconds=e.minuteToSecond(e.classList[e.currentIndex].bfsc),e.startCount()},function(){t.showToast({icon:"none",title:"网络异常，请重试"})},function(){})},classifyPhotos:function(t){if(null!=t){this.classList=[];for(var e=0;e<t.length;e++){var s=t[e],n={fileid:s.attid,src:o.default.host+o.default.loadImage+"&attid="+s.attid,bfsc:s.bfsc};this.classList.push(n)}}},viewPhoto:function(t){l.default.viewPhoto([t])},provClick:function(t){this.clearTimer(),this.currentIndex-=1,this.currentIndex<this.maxReadIndex?this.isCountFinish=!0:this.isCountFinish=!1},nextClick:function(e){0!=this.isCountFinish&&(this.currentIndex==this.classList.length-1?t.navigateTo({url:"../ceshi/ceshi?recordid="+this.model.ksapid}):(this.currentIndex+=1,this.currentIndex>=this.maxReadIndex&&(this.maxReadIndex=this.currentIndex,this.seconds=this.minuteToSecond(this.classList[this.currentIndex].bfsc),this.startCount())))},gotoCeshi:function(e){t.navigateTo({url:"../ceshi/ceshi?recordid="+this.model.ksapid})},startCount:function(){var t=this;this.isCountFinish=!1,this.currentIndex==this.classList.length-1?this.nextPage="("+this.seconds+")去参加考试":this.nextPage="("+this.seconds+")下一页",this.timer=setInterval(function(){0===t.seconds?(t.timer&&t.clearTimer(),t.isCountFinish=!0):t.isCountFinish=!1,t.loading()},1e3)},loading:function(){0==this.seconds?this.currentIndex==this.classList.length-1?this.nextPage="去参加考试":this.nextPage="下一页":(this.seconds-=1,this.currentIndex==this.classList.length-1?this.nextPage="("+this.seconds+")去参加考试":this.nextPage="("+this.seconds+")下一页")},clearTimer:function(){clearInterval(this.timer),this.timer=null,this.seconds=0,this.loading()},pauseTimer:function(){console.log("时间暂停，清除Timer"),clearInterval(this.timer),this.timer=null},minuteToSecond:function(t){return parseInt(t)}}};e.default=h}).call(this,s("6e42")["default"])},df90:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"baseView"},[s("view",{staticClass:"pxTitleView"},[s("label",{staticClass:"pxTitleLabel"},[t._v(t._s(t.model.bt))]),s("label",{staticClass:"pxSubTitleLabel"},[t._v("积分："+t._s(t.model.kjjf)+"分")])],1),s("image",{staticClass:"classImage",attrs:{mode:"aspectFit",src:t.classList.length>0?t.classList[t.currentIndex].src:"",eventid:"289ecc0c-0"},on:{click:function(e){t.viewPhoto(t.classList[t.currentIndex])}}}),s("label",{staticClass:"countLabel"},[t._v(t._s(t.currentIndex+1)+"/"+t._s(t.classList.length))]),s("view",{staticClass:"controlBtnView"},[s("button",{class:t.currentIndex>0?"buttonStyle":"buttonStyleDisable",attrs:{eventid:"289ecc0c-1"},on:{click:t.provClick}},[t._v("上一页")]),s("button",{class:t.isCountFinish?"buttonStyle":"buttonStyleDisable",attrs:{eventid:"289ecc0c-2"},on:{click:t.nextClick}},[t._v(t._s(t.nextPage))])],1)],1)},i=[];s.d(e,"a",function(){return n}),s.d(e,"b",function(){return i})}},[["3a14","common/runtime","common/vendor"]]]);