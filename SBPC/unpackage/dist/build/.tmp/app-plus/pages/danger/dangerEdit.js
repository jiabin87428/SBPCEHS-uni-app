(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/danger/dangerEdit"],{"08ba":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-icon",class:["uni-icon-"+t.type],style:{color:t.color,"font-size":t.fontSize},attrs:{eventid:"346bda0d-0"},on:{click:function(e){t.onClick()}}})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"09d6":function(t,e,n){"use strict";n.r(e);var i=n("08ba"),a=n("f505");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("4e52");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"1b79":function(t,e,n){"use strict";var i=n("b9cb"),a=n.n(i);a.a},"34a7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(n("8959")),a=l(n("09d6")),s=l(n("d36e")),o=l(n("9fbc")),r=l(n("40bc")),c=l(n("736d")),u=(l(n("fa28")),n("2f62"));function l(t){return t&&t.__esModule?t:{default:t}}var d={computed:(0,u.mapState)(["userInfo"]),components:{uniList:i.default,uniListItem:s.default,uniIcon:a.default},data:function(){return{instanceid:"",recordid:"",yhms:"",yhdj:"",yhhg:"",yhlx:"",zgqx:"",yhly:"",zrbm:null,imageList:[],littleImageWidth:0,flowbtnchooseflow:[],editable:!0,dangerLevel:r.default.dangerLevel,dangerResult:r.default.dangerResult,dangerType:r.default.dangerType,dangerSource:r.default.dangerSource}},onLoad:function(e){this.littleImageWidth=(t.getSystemInfoSync().windowWidth-50)/4},onNavigationBarButtonTap:function(){},onShow:function(){},methods:{jumpInput:function(e,n,i){var a=this;t.navigateTo({url:"../common/inputPage?key="+e+"&placeholder="+n+"&text="+i}),this.$fire.once(e,function(t){a[e]=t})},jumpOrgChoose:function(e){var n=this,i=[this.zrbm];t.navigateTo({url:"../common/orgChoose?selected="+JSON.stringify(i)+"&key="+e+"&mltiple=false"}),this.$fire.once(e,function(t){console.log(""+JSON.stringify(t)),n[e]=t})},alertSheetShow:function(e,n){var i=this;t.showActionSheet({itemList:n,success:function(t){i[e]=n[t.tapIndex]},fail:function(t){}})},pickerChange:function(t,e){this[e.target.id]=t[e.target.value]},dateChange:function(t,e){this[t]=e.target.value},saveClick:function(e){var n=this,i={userid:n.userInfo.userid,instanceid:n.instanceid,recordid:n.recordid,yhms:n.yhms,yhdj:n.yhdj,yhhg:n.yhhg,yhlx:n.yhlx,zgqx:n.zgqx,yhly:n.yhly,zrbmid:null==n.zrbm?"":n.zrbm.id,zrbmmc:null==n.zrbm?"":n.zrbm.name,fqrid:n.userInfo.userid,fqrmc:n.userInfo.username};c.default.requestLoading(o.default.addDanger,i,"添加隐患",function(t){n.instanceid=t.instanceid,n.recordid=t.recordid,n.flowbtnchooseflow=t.flowbtnchooseflow},function(){t.showToast({icon:"none",title:"添加失败"})},function(){})},roamClick:function(e){var n=this,i={userid:n.userInfo.userid,instanceid:n.instanceid,recordid:n.recordid,yhms:n.yhms,yhdj:n.yhdj,yhhg:n.yhhg,yhlx:n.yhlx,zgqx:n.zgqx,yhly:n.yhly,zrbmid:null==n.zrbm?"":n.zrbm.id,zrbmmc:null==n.zrbm?"":n.zrbm.name,fqrid:n.userInfo.userid,fqrmc:n.userInfo.username,operationname:e.operationname,nextstatusname:e.nextstatusname,prestatusname:e.prestatusname,flowtype:e.flowtype};c.default.requestLoading(o.default.flowDanger,i,"正在流转",function(t){console.log(""+JSON.stringify(t))},function(){t.showToast({icon:"none",title:"流转失败"})},function(){})},addPhoto:function(){var e=this;t.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){console.log(JSON.stringify(t.tempFilePaths));for(var n=0;n<t.tempFilePaths.length;n++){var i={fileid:"",src:t.tempFilePaths[n],type:1};e.imageList.push(i)}}})},deleteImage:function(e,n){var i=this;if(e.src.startsWith("http:")){var a={item:i.item,index:i.itemIndex};i.setSublistItem(a);var s={from:"jc",yyid:i.item.id,fileid:e.fileid,userid:i.userInfo.userid};c.default.requestLoading(o.default.deleteImage,s,"正在删除图片",function(t){console.log("删除成功："+JSON.stringify(t)),i.item.fj=t.fj,i.imageList.splice(n,1)},function(){t.showToast({icon:"none",title:"删除失败"})},function(){})}else i.imageList.splice(n,1)},viewPhoto:function(){for(var e=this,n=[],i=0;i<e.imageList.length;i++){var a=e.imageList[i];n.push(a.src)}t.previewImage({urls:n})}}};e.default=d}).call(this,n("649d")["default"])},"39f9":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-list-cell",class:[!0===t.disabled||"true"===t.disabled?"uni-list-cell--disabled":""],attrs:{"hover-class":!0===t.disabled||"true"===t.disabled||!0===t.showSwitch||"true"===t.showSwitch?"":"uni-list-cell--hover",eventid:"30c48a99-1"},on:{click:t.onClick}},[n("view",{staticClass:"uni-list-cell__container"},[t.thumb?n("view",{staticClass:"uni-list-cell__icon"},[n("image",{staticClass:"uni-list-cell__icon-img",attrs:{src:t.thumb}})]):!0===t.showExtraIcon||"true"===t.showExtraIcon?n("view",{staticClass:"uni-list-cell__icon"},[n("uni-icon",{attrs:{color:t.extraIcon.color,size:t.extraIcon.size,type:t.extraIcon.type,mpcomid:"30c48a99-0"}})],1):t._e(),n("view",{staticClass:"uni-list-cell__content"},[n("view",{staticClass:"uni-list-cell__content-title"},[t._v(t._s(t.title))]),t.note?n("view",{staticClass:"uni-list-cell__content-note"},[t._v(t._s(t.note))]):t._e()]),t.subnote||!0===t.showBadge||"true"===t.showBadge||!0===t.showArrow||"true"===t.showArrow||!0===t.showSwitch||"true"===t.showSwitch?n("view",{staticClass:"uni-list-cell__extra"},[t.subnote?n("view",{staticClass:"uni-list-cell__content-note"},[t._v(t._s(t.subnote))]):t._e(),!0===t.showBadge||"true"===t.showBadge?n("uni-badge",{attrs:{type:t.badgeType,text:t.badgeText,mpcomid:"30c48a99-1"}}):t._e(),!0===t.showSwitch||"true"===t.showSwitch?n("switch",{attrs:{disabled:t.disabled,checked:t.switchChecked,eventid:"30c48a99-0"},on:{change:t.onSwitchChange}}):t._e(),!0===t.showArrow||"true"===t.showArrow?n("uni-icon",{attrs:{color:"#bbb",size:"20",type:"arrowright",mpcomid:"30c48a99-2"}}):t._e()],1):t._e()])])},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"3dec":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-list"};e.default=i},"40bc":function(t,e,n){"use strict";var i={dangerLevel:["一般隐患","重大隐患"],dangerResult:["死亡","重伤","轻伤","行政处罚"],dangerType:["消防安全","行走及工作面","化学品管理","热/冷表面","一般废物管理","登高作业及坠落防护","废弃排放","电气安全/挂牌上锁","起吊安全","特种设备","机械安全","危险废物管理","职业健康及个人防护","承包商管理","工具安全","环境保护","应急响应","培训","废水处理","电气安全","消防","食品安全","高处作业","人机工程","非机械性伤害"],dangerSource:["企业自查","集团检查","政府检查","第三方审核","相关方"]};t.exports=i},"40cb":function(t,e,n){},4876:function(t,e,n){"use strict";n.r(e);var i=n("bc92"),a=n("c848");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("cfba");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"4e52":function(t,e,n){"use strict";var i=n("8946"),a=n.n(i);a.a},"52f8":function(t,e,n){"use strict";var i=n("40cb"),a=n.n(i);a.a},"548e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-badge",props:{type:{type:String,default:"default"},inverted:{type:Boolean,default:!1},text:{type:String,default:""},size:{type:String,default:"normal"}},computed:{setClass:function(){var t=["uni-badge-"+this.type,"uni-badge--"+this.size];return!0===this.inverted&&t.push("uni-badge-inverted"),t.join(" ")}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},5513:function(t,e,n){"use strict";n.r(e);var i=n("b806"),a=n("5888");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("cbd5");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"579e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-icon",props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},5888:function(t,e,n){"use strict";n.r(e);var i=n("548e"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"72fa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("09d6")),a=s(n("5513"));function s(t){return t&&t.__esModule?t:{default:t}}var o={name:"uni-list-item",components:{uniIcon:i.default,uniBadge:a.default},data:function(){return{}},props:{title:String,note:String,subnote:String,disabled:{type:[Boolean,String],default:!1},showArrow:{type:[Boolean,String],default:!0},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:String,badgeType:{type:String,default:"success"},thumb:String,showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"contact",color:"#000000",size:"20"}}}},methods:{onClick:function(){this.$emit("click")},onSwitchChange:function(t){this.$emit("switchChange",t.detail)}}};e.default=o},"816d":function(t,e,n){"use strict";n.r(e);var i=n("3dec"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},8946:function(t,e,n){},8959:function(t,e,n){"use strict";n.r(e);var i=n("b81f"),a=n("816d");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("52f8");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},b446:function(t,e,n){"use strict";n("c6c1");var i=s(n("b0ce")),a=s(n("4876"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},b806:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.text?n("text",{staticClass:"uni-badge",class:t.setClass,attrs:{eventid:"68dcfa4a-0"},on:{click:function(e){t.onClick()}}},[t._v(t._s(t.text))]):t._e()},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},b81f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-list"},[t._t("default",null,{mpcomid:"3b6bb3ad-0"})],2)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},b9cb:function(t,e,n){},bc92:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"baseView"},[t._m(0),n("view",{staticClass:"cellInfoView"},[n("uni-list",{attrs:{mpcomid:"5c0aa864-8"}},[n("uni-list-item",{attrs:{title:"隐患描述",note:t.yhms,"show-arrow":"true",eventid:"5c0aa864-0",mpcomid:"5c0aa864-0"},on:{click:function(e){t.jumpInput("yhms","请输入隐患描述",t.yhms)}}}),n("uni-list-item",{attrs:{title:"隐患等级",subnote:t.yhdj,"show-arrow":"true",eventid:"5c0aa864-1",mpcomid:"5c0aa864-1"},on:{click:function(e){t.alertSheetShow("yhdj",t.dangerLevel)}}}),n("uni-list-item",{attrs:{title:"隐患后果",subnote:t.yhhg,"show-arrow":"true",eventid:"5c0aa864-2",mpcomid:"5c0aa864-2"},on:{click:function(e){t.alertSheetShow("yhhg",t.dangerResult)}}}),n("picker",{attrs:{id:"yhlx",range:t.dangerType,eventid:"5c0aa864-3"},on:{change:function(e){t.pickerChange(t.dangerType,e)}}},[n("uni-list-item",{attrs:{title:"隐患类型",subnote:t.yhlx,"show-arrow":"true",mpcomid:"5c0aa864-3"}})],1),n("picker",{attrs:{mode:"date",value:t.zgqx,eventid:"5c0aa864-4"},on:{change:function(e){t.dateChange("zgqx",e)}}},[n("uni-list-item",{attrs:{title:"整改期限",subnote:t.zgqx,"show-arrow":"true",mpcomid:"5c0aa864-4"}})],1),n("picker",{attrs:{id:"yhly",range:t.dangerSource,eventid:"5c0aa864-5"},on:{change:function(e){t.pickerChange(t.dangerSource,e)}}},[n("uni-list-item",{attrs:{title:"隐患来源",subnote:t.yhly,"show-arrow":"true",mpcomid:"5c0aa864-5"}})],1),n("uni-list-item",{attrs:{title:"责任部门",subnote:t.zrbm?t.zrbm.name:"","show-arrow":"true",eventid:"5c0aa864-6",mpcomid:"5c0aa864-6"},on:{click:function(e){t.jumpOrgChoose("zrbm")}}}),n("uni-list-item",{attrs:{title:"发起人",subnote:this.userInfo.username,"show-arrow":"false",mpcomid:"5c0aa864-7"}})],1),n("view",{staticClass:"cellImageBaseView"},[n("view",{staticClass:"cellImageTitleView"},[n("text",{staticClass:"leftTextRow"},[t._v("隐患照片")]),n("text",{staticClass:"rightTextRow"},[t._v(t._s(t.imageList.length))])]),n("view",{staticClass:"imageView",attrs:{id:"imageView"}},[t._l(t.imageList,function(e,i){return n("block",{key:i},[n("view",{staticClass:"littleImageView",style:{width:t.littleImageWidth+"px",height:t.littleImageWidth+"px"}},[n("image",{staticClass:"littleImage",attrs:{id:i,src:e.src,mode:"aspectFit",eventid:"5c0aa864-7-"+i},on:{click:t.viewPhoto}}),n("image",{staticClass:"littleImageDelete",attrs:{src:"../../static/assets/delete.png",id:i,mode:"aspectFit",eventid:"5c0aa864-8-"+i},on:{click:function(n){t.deleteImage(e,i)}}})])])}),n("view",{staticClass:"littleImageView",style:{width:t.littleImageWidth+"px",height:t.littleImageWidth+"px"},attrs:{eventid:"5c0aa864-9"},on:{click:t.addPhoto}},[n("image",{staticClass:"littleImage",attrs:{src:"../../static/assets/addImage.png"}})])],2)])],1),n("view",{staticClass:"btnView"},[n("button",{staticClass:"saveBtn",attrs:{eventid:"5c0aa864-10"},on:{tap:t.saveClick}},[t._v("保存")]),t._l(t.flowbtnchooseflow,function(e,i){return n("block",{key:i},[n("button",{staticClass:"saveBtn",attrs:{eventid:"5c0aa864-11-"+i},on:{tap:function(n){t.roamClick(e)}}},[t._v(t._s(e.operationname))])],1)})],2)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"cellTitleView"},[n("text",{staticClass:"cellTitle"},[t._v("基础信息")])])}];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},c848:function(t,e,n){"use strict";n.r(e);var i=n("34a7"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},cbd5:function(t,e,n){"use strict";var i=n("f912"),a=n.n(i);a.a},cc40:function(t,e,n){"use strict";n.r(e);var i=n("72fa"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},cfba:function(t,e,n){"use strict";var i=n("eb74"),a=n.n(i);a.a},d36e:function(t,e,n){"use strict";n.r(e);var i=n("39f9"),a=n("cc40");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("1b79");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},eb74:function(t,e,n){},f505:function(t,e,n){"use strict";n.r(e);var i=n("579e"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},f912:function(t,e,n){}},[["b446","common/runtime","common/vendor"]]]);